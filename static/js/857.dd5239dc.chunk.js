"use strict";(self.webpackChunkreact_complete_guide=self.webpackChunkreact_complete_guide||[]).push([[857],{857:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var s=n(791),c=n(931),r=n(523),o=n(152),a=n(995),m=n(853),d=n(556),i="CommentItem_item__UsGGH",u=n(184),l=function(e){return(0,u.jsx)("li",{className:i,children:(0,u.jsx)("p",{children:e.text})})},x="CommentsList_comments__0mFV-",h=function(e){return(0,u.jsx)("ul",{className:x,children:e.comments.map((function(e){return(0,u.jsx)(l,{text:e.text},e.id)}))})},j="Comments_comments__3XyHy",f="NewCommentForm_form__swAOm",p="NewCommentForm_control__t1Jt9",_="NewCommentForm_actions__8Y3RK",N=function(e){var t=(0,s.useState)(!1),n=(0,o.Z)(t,2),c=n[0],r=n[1],i=(0,s.useRef)(),l=(0,a.Z)(m.Ir),x=l.sendRequest,h=l.status,j=l.error,N=e.onAddedComment;(0,s.useEffect)((function(){"completed"!==h||j||N()}),[h,j,N]);var C=function(t){t.preventDefault();var n=i.current.value;0===n.trim().length?r(!0):r(!1),c||(x({commentData:{text:n},quoteId:e.quoteId}),i.current.value="")};return(0,u.jsxs)("form",{className:f,onSubmit:C,children:["pending"===h&&(0,u.jsx)("div",{className:"centered",children:(0,u.jsx)(d.Z,{})}),(0,u.jsxs)("div",{className:p,onSubmit:C,children:[(0,u.jsx)("label",{htmlFor:"comment",children:"Your Comment"}),(0,u.jsx)("textarea",{id:"comment",rows:"5",ref:i,required:!0})]}),c&&(0,u.jsx)("p",{children:"Can't post an empty comment!"}),(0,u.jsx)("div",{className:_,children:(0,u.jsx)("button",{className:"btn",children:"Add Comment"})})]})},C=function(){var e=(0,s.useState)(!1),t=(0,o.Z)(e,2),n=t[0],r=t[1],i=(0,c.UO)().quoteId,l=(0,a.Z)(m.h_),x=l.sendRequest,f=l.status,p=l.data;(0,s.useEffect)((function(){x(i)}),[x,i]);var _,C=(0,s.useCallback)((function(){x(i)}),[x,i]);return"pending"===f&&(_=(0,u.jsx)("div",{className:"centered",children:(0,u.jsx)(d.Z,{})})),"completed"===f&&p&&(_=(0,u.jsx)(h,{comments:p})),"completed"!==f||p&&0!==p.length||(_=(0,u.jsx)("p",{children:"No comments were added yet"})),(0,u.jsxs)("section",{className:j,children:[(0,u.jsx)("h2",{children:"User Comments"}),!n&&(0,u.jsx)("button",{className:"btn",onClick:function(){r(!0)},children:"Add a Comment"}),n&&(0,u.jsx)(N,{quoteId:i,onAddedComment:C}),_]})},v="HighlightedQuote_quote__-QJOv",g=function(e){return(0,u.jsxs)("figure",{className:v,children:[(0,u.jsx)("p",{children:e.text}),(0,u.jsx)("figcaption",{children:e.author})]})},b=function(){var e=(0,c.UO)(),t=(0,c.$B)(),n=e.quoteId,o=(0,a.Z)(m.jR,!0),i=o.sendRequest,l=o.status,x=o.data,h=o.error;return(0,s.useEffect)((function(){i(n)}),[i,n]),"pending"===l?(0,u.jsx)("div",{className:"centered",children:(0,u.jsx)(d.Z,{})}):h?(0,u.jsx)("p",{className:"centered",children:h}):x.text?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(g,{text:x.text,author:x.author}),(0,u.jsx)(c.AW,{path:"".concat(t.path),exact:!0,children:(0,u.jsx)("div",{className:"centered",children:(0,u.jsx)(r.rU,{className:"btn--flat",to:"".concat(t.url,"/comments"),children:"Load Comments"})})}),(0,u.jsx)(c.AW,{path:"".concat(t.path,"/comments"),exact:!0,children:(0,u.jsx)(C,{})})]}):(0,u.jsx)("p",{className:"centered",children:"No quote found!"})}}}]);
//# sourceMappingURL=857.dd5239dc.chunk.js.map